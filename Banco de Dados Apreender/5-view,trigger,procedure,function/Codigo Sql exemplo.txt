CREATE DATABASE BDAGENDA;

USE BDAGENDA;

CREATE TABLE CONTATO (
    IDContato INT PRIMARY KEY,
    nome VARCHAR(25),
    sobrenome VARCHAR(45),
    Email VARCHAR(60),
    DtNascimento DATE,
    FK_GRUPO_IDGrupo INT,

);

CREATE TABLE GRUPO (
    IDGrupo INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(45),
    DtCriacao DATE
);

CREATE TABLE TELEFONE (
    ddd VARCHAR(3),
    numTel VARCHAR(9),
    PRIMARY KEY (DDD, NUMTEL),
    FK_CONTATO_IDContato INT
);
 
ALTER TABLE CONTATO ADD CONSTRAINT FK_CONTATO_2
    FOREIGN KEY (FK_GRUPO_IDGrupo)
    REFERENCES GRUPO (IDGrupo)
    ON UPDATE CASCADE
    ON DELETE RESTRICT;
 
ALTER TABLE TELEFONE ADD CONSTRAINT FK_TELEFONE_1
    FOREIGN KEY (FK_CONTATO_IDContato)
    REFERENCES CONTATO (IDContato)
    ON UPDATE SET NULL
    ON DELETE CASCADE;